-- Categorías generadas automáticamente desde aliados_exportados.json
INSERT INTO category (name, slug, description, created_at, updated_at) VALUES
('SERVICIOS', 'SERVICIOS-CAT-1', 'SECTOR SERVICIOS', 1763222480, 1763222480),
('ONG', 'ONG-CAT-2', 'SECTOR ONG', 1763222480, 1763222480),
('AGROINDUSTRIA', 'AGROINDUSTRIA-CAT-3', 'SECTOR AGROINDUSTRIA', 1763222480, 1763222480),
('COMERCIO', 'COMERCIO-CAT-4', 'SECTOR COMERCIO', 1763222480, 1763222480),
('SERVICIO', 'SERVICIO-CAT-5', 'SECTOR SERVICIO', 1763222480, 1763222480),
('INDUSTRIA', 'INDUSTRIA-CAT-6', 'SECTOR INDUSTRIA', 1763222480, 1763222480),
('ASOCIACIÓN SIN FINES DE LUCRO', 'ASOCIACI-N-SIN-FINES-DE-LUCRO-CAT-7', 'SECTOR ASOCIACIÓN SIN FINES DE LUCRO', 1763222480, 1763222480),
('COMERCIO Y SERVICIOS', 'COMERCIO-Y-SERVICIOS-CAT-8', 'SECTOR COMERCIO Y SERVICIOS', 1763222480, 1763222480),
('CENTRO DE BELLEZA IRIS', 'CENTRO-DE-BELLEZA-IRIS-CAT-9', 'SECTOR CENTRO DE BELLEZA IRIS', 1763222480, 1763222480),
('SODA', 'SODA-CAT-10', 'SECTOR SODA', 1763222480, 1763222480),
('LICORERA', 'LICORERA-CAT-11', 'SECTOR LICORERA', 1763222480, 1763222480)
ON DUPLICATE KEY UPDATE
    name = VALUES(name),
    description = VALUES(description),
    updated_at = VALUES(updated_at);

INSERT INTO business_category (business_id, category_id)
SELECT b.id, c.id
FROM business b
JOIN category c ON c.name = UPPER(TRIM(b.summary))
LEFT JOIN business_category bc ON bc.business_id = b.id AND bc.category_id = c.id
WHERE b.summary IS NOT NULL
  AND TRIM(b.summary) <> ''
  AND bc.business_id IS NULL;